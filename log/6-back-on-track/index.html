<!doctype html><html lang=en><head><meta charset=utf-8><meta content="width=device-width,initial-scale=1" name=viewport><meta content=ekunazanu name=author><meta content="It's time to speed up." name=description><meta content="Back on Track" property=og:title><meta content=article property=og:type><meta content="It's time to speed up." property=og:description><meta content=https://ekunazanu.foo/log/6-back-on-track/ property=og:url><meta content=https://ekunazanu.foo/thumbnails/log.6.running.avif.png property=og:image><meta content="Doodle of a person running towards the right." property=og:image:alt><meta content=image/png property=og:image:type><meta content=1200 property=og:image:width><meta content=900 property=og:image:height><meta content=en_US property=og:locale><meta content=ekunazanu.foo property=og:site_name><title>Back on Track ~ ekunazanu.foo</title><link href=https://ekunazanu.foo/log/6-back-on-track/ rel=cannonical><link href=https://ekunazanu.foo/atom.xml rel=alternate type=application/atom+xml><link href=https://ekunazanu.foo/misc/main.css rel=stylesheet><link href=https://ekunazanu.foo/misc/favicon.png rel=icon><meta content=Zola name=generator><body><nav><ul><li><h2><a href=https://ekunazanu.foo>ekunazanu.foo</a></h2><li><a href=https://ekunazanu.foo/log>Log</a> ⟶<li><a href=https://ekunazanu.foo/lab>Lab</a></ul></nav><div class=print>https://ekunazanu.foo</div><main><article><h1>Back on Track</h1><p>Title is clickbait. When I say back on track, it is something closer to this:<p><img alt="doodle of a person strapped to a railway track" decoding=async loading=lazy src=/media/log/on-track.avif><p>Thing is, everything was indeed going as planned. The server is up and running, and the frontend for it looks and works decent. The main roadblock turned out to be my college ISP. I was expecting a few issues, but nothing fundamentally unfix-able (or unhack-able). Turned out not to be the case.<h2>PBMBDB v0.2</h2><p>About some changes first. I changed the structure for storing the top elements — instead of a min-heap, I am using an unsorted array and just tracking the minimum count. This makes the insertions scale in linear time instead of being log-linear (although in practice the difference is almost negligible). Also, I went with <a rel="noopener nofollow noreferrer" href=https://en.wikipedia.org/wiki/Fowler%E2%80%93Noll%E2%80%93Vo_hash_function target=_blank>FNV-1A</a> for hashing — it is much simpler and faster, and still retains a satisfactory uniform distribution. I also calculate only a single hash and break it into separate parts to simulate multiple hashes. A big speedup for a slight increase in collisions and a very slight degradation in precision.<p>For data serialization, I originally wanted to go with <a rel="noopener nofollow noreferrer" href=https://en.wikipedia.org/wiki/Protocol_Buffers target=_blank>protobuf</a> because of its size and performance. But later, I realized it would just add more dependencies I don’t want. In the future I might reconsider it if it becomes a bottleneck. However right now, I have an even bigger issue: The college internet service provider.<h2 id=-1>Derailing Hard</h2><p>Turns out my college ISP uses NAT, and my server is behind it. In hindsight it should have been pretty obvious. Anyhow, it means that I cannot have a simple DNS (or even a DDNS) setup for the API endpoints — it will be inaccessible. While I can use a tunneling service, it would mean shelling out $$$. An ugly workaround is to send requests from the server to another device and track the TCP source port and use that information for the API endpoint. But that is too unreliable and too ugly for my liking.<p>So what now? Imagine you are in a race; you are the hare. You take a nap just before the finish line and let the tortoise beat you. What now? Do you give up? No. You pretend it was all part of the plan. You pretend that your nap was intentional, and that the race was just an act to symbolize that underdogs can win too.<p>That’s what I am doing as well.<p><img alt="doodle of cool person explaining the bug is actually a feature" decoding=async loading=lazy src=/media/log/feature-not-bug.avif><p>I am simply rebranding the project. Instead of allowing anyone to post, it is exclusively for the people in my college. Early Facebook style. Except the project is really basic, and serves no other purpose than being a fun little <del>social network</del> social experiment. It <a href=/lab/free-speech>should be up</a> in a few hours.<p>Until I find the right way to get it working for the wider internet, my DNS record just points to the LAN IP of the Raspberry Pi I am running the server on. And anyway once I get back home, I should be able to connect it to my home router (IPv6, no NAT non-sense). But that will take a few months ¯\_('_')_/¯.<p>That’s all. Cya next week.</article></main><footer><a href=https://ekunazanu.foo/more#Terms_of_Use>© 2025</a> <a href=https://ekunazanu.foo/about>ekunazanu</a> · <a rel="noopener nofollow noreferrer" href=https://creativecommons.org/licenses/by/4.0/ target=_blank>CC BY 4.0</a> · <a rel="noopener nofollow noreferrer" href=https://github.com/ekunazanu/ekunazanu.foo target=_blank>Source</a></footer>